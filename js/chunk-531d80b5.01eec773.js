(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-531d80b5","chunk-2d0e8c31","chunk-2d0d061a","chunk-2d0c53b3"],{"3de1":function(t,e,n){"use strict";function r(t){var e=t.split("/"),n=e[4]+"/"+e[5];return n}n.r(e),n.d(e,"src",function(){return r})},6879:function(t,e,n){"use strict";n.r(e);var r=n("a34a"),a=n.n(r),i=n("dfd8");function s(t,e,n,r,a,i,s){try{var o=t[i](s),u=o.value}catch(c){return void n(c)}o.done?e(u):Promise.resolve(u).then(r,a)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(t){s(i,r,a,o,u,"next",t)}function u(t){s(i,r,a,o,u,"throw",t)}o(void 0)})}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}var f=function(){function t(){u(this,t)}return l(t,[{key:"addSongList",value:function(){var t=o(a.a.mark(function t(e){var n;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["post"])("v1/songlist",e,{handleError:!0});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getSongList",value:function(){var t=o(a.a.mark(function t(e){var n;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["get"])("v1/songlist/".concat(e));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"editSongList",value:function(){var t=o(a.a.mark(function t(e){var n;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["put"])("v1/songlist",e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"delectSongList",value:function(){var t=o(a.a.mark(function t(e){var n;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["_delete"])("v1/songlist/".concat(e));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getSongLists",value:function(){var t=o(a.a.mark(function t(e){var n;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["get"])("v1/songlist",e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}]),t}();e["default"]=new f},"73db":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"title"},[n("span",[t._v("编辑歌单")]),n("span",{staticClass:"back",on:{click:t.back}},[n("i",{staticClass:"iconfont icon-fanhui"}),t._v(" 返回 ")])]),n("el-divider"),n("div",{staticClass:"wrap"},[n("el-row",[n("el-col",{attrs:{lg:16,md:20,sm:24,xs:24}},[n("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],ref:"form",attrs:{model:t.form,"status-icon":"","label-width":"200px"},nativeOn:{submit:function(t){t.preventDefault()}}},[n("el-form-item",{attrs:{label:"歌单名",prop:"name"}},[n("el-input",{attrs:{size:"medium",placeholder:"请填写"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"介绍",prop:"desc"}},[n("el-input",{attrs:{size:"medium",placeholder:"请填写"},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc",e)},expression:"form.desc"}})],1),n("el-form-item",{attrs:{label:"来源(0:网络;1:本地)",prop:"from"}},[n("el-switch",{attrs:{"active-text":"本地","inactive-text":"网络","active-value":"1","inactive-value":"0"},model:{value:t.form.from,callback:function(e){t.$set(t.form,"from",e)},expression:"form.from"}})],1),n("el-form-item",{attrs:{label:"歌单封面(网络)",prop:"img"}},[n("el-input",{attrs:{size:"medium",type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请填写"},model:{value:t.form.img,callback:function(e){t.$set(t.form,"img",e)},expression:"form.img"}})],1),n("el-form-item",{attrs:{label:"歌单封面"}},[n("upload-imgs",{ref:"uploadEle",attrs:{value:t.initData,multiple:!0,"max-num":1,"auto-upload":!0}})],1),n("el-form-item",{attrs:{label:"排序(数字,可放空)"}},[n("el-input",{attrs:{size:"medium",placeholder:"排列顺序(数字,可不填)"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),n("el-form-item",{attrs:{label:"歌单歌曲"}},[n("el-input",{attrs:{size:"medium",placeholder:"按照这样的格式填写歌曲ID[1,2,3]"},model:{value:t.form.songs,callback:function(e){t.$set(t.form,"songs",e)},expression:"form.songs"}}),t._l(t.songs,function(e,r){return[n("div",{staticClass:"song"},[n("div",[t._v("id:"+t._s(e.id))]),n("div",[t._v("歌名:"+t._s(e.song))]),n("div",[t._v("歌手:"+t._s(e.singer))])])]})],2),n("el-form-item",{staticClass:"submit"},[n("el-button",{directives:[{name:"auth",rawName:"v-auth",value:{auth:"创建歌单",type:"disabled"},expression:"{auth:'创建歌单', type: 'disabled'}"}],attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("提 交")]),n("el-button",{on:{click:function(e){return t.resetForm("form")}}},[t._v("重 置")])],1)],1)],1)],1)],1)],1)},a=[],i=n("a34a"),s=n.n(i),o=n("e0ba"),u=n("6879"),c=n("8b3d"),l=n("3de1");function f(t,e,n,r,a,i,s){try{var o=t[i](s),u=o.value}catch(c){return void n(c)}o.done?e(u):Promise.resolve(u).then(r,a)}function p(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function s(t){f(i,r,a,s,o,"next",t)}function o(t){f(i,r,a,s,o,"throw",t)}s(void 0)})}}var m={data:function(){return{form:{},initData:[],loading:!1,fileList:"",uploadUrl:"http://muscafe/index.php/cms/file",addSong:!1,songs:[]}},props:{editID:Number},components:{uploadImgs:o["default"]},methods:{submitForm:function(){var t=p(s.a.mark(function t(e){var n;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.loading=!0,t.next=3,this.getValue();case 3:if(console.log(this.form),this.form.img&&this.form.name&&!(this.form.from<0)){t.next=7;break}return this.loading=!1,t.abrupt("return",this.$message.error("请完整填写"));case 7:return t.next=9,u["default"].editSongList(this.form);case 9:n=t.sent,0===n.error_code?(this.$message.success("".concat(n.msg)),this.back()):this.$message.error(n.data.msg),this.loading=!1;case 12:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),resetForm:function(t){this.$refs[t].resetFields()},back:function(){this.$emit("editClose")},getSongList:function(){var t=p(s.a.mark(function t(e){var n;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,u["default"].getSongList(e);case 2:n=t.sent,console.log(n),this.form=n;case 5:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),getValue:function(){var t=p(s.a.mark(function t(){var e,n;return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(0!=this.form.from){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this.$refs["uploadEle"].getValue();case 4:if(e=t.sent,n=e[0].src,n){t.next=8;break}return t.abrupt("return");case 8:this.form.img=n;case 9:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),doClear:function(){this.$refs["uploadEle"].clear()},getSongs:function(){var t=p(s.a.mark(function t(e){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,c["default"].getSongInList(e);case 2:this.songs=t.sent;case 3:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),initUpload:function(t){this.initData=[{id:"",src:"",display:t,img_id:""}]}},created:function(){var t=p(s.a.mark(function t(){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,this.getSongList(this.editID);case 2:return t.next=4,this.getSongs(this.editID);case 4:this.initUpload(this.form.img),1==this.form.from&&(this.form.img=Object(l["src"])(this.form.img),console.log(this.form));case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),mounted:function(){var t=p(s.a.mark(function t(){return s.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:case"end":return t.stop()}},t)}));function e(){return t.apply(this,arguments)}return e}()},v=m,d=(n("e919"),n("2877")),h=Object(d["a"])(v,r,a,!1,null,"552e1ccc",null);e["default"]=h.exports},"8b3d":function(t,e,n){"use strict";n.r(e);var r=n("a34a"),a=n.n(r),i=n("dfd8");function s(t,e,n,r,a,i,s){try{var o=t[i](s),u=o.value}catch(c){return void n(c)}o.done?e(u):Promise.resolve(u).then(r,a)}function o(t){return function(){var e=this,n=arguments;return new Promise(function(r,a){var i=t.apply(e,n);function o(t){s(i,r,a,o,u,"next",t)}function u(t){s(i,r,a,o,u,"throw",t)}o(void 0)})}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function l(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t}var f=function(){function t(){u(this,t)}return l(t,[{key:"addSong",value:function(){var t=o(a.a.mark(function t(e){var n;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["post"])("v1/song",e,{handleError:!0});case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getSong",value:function(){var t=o(a.a.mark(function t(e){var n;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["get"])("v1/song/".concat(e));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"editSong",value:function(){var t=o(a.a.mark(function t(e){var n;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["put"])("v1/song",e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"delectSong",value:function(){var t=o(a.a.mark(function t(e){var n;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["_delete"])("v1/song/".concat(e));case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getSongs",value:function(){var t=o(a.a.mark(function t(e){var n;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["get"])("v1/song",e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()},{key:"getSongInList",value:function(){var t=o(a.a.mark(function t(e){var n;return a.a.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,Object(i["get"])("v1/song/list/"+e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}},t)}));function e(e){return t.apply(this,arguments)}return e}()}]),t}();e["default"]=new f},a644:function(t,e,n){},e919:function(t,e,n){"use strict";var r=n("a644"),a=n.n(r);a.a}}]);