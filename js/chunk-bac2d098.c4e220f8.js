(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-bac2d098","chunk-2d0e8c31","chunk-2d0c53b3"],{"3de1":function(e,t,r){"use strict";function n(e){var t=e.split("/"),r=t[4]+"/"+t[5];return r}r.r(t),r.d(t,"src",function(){return n})},5654:function(e,t,r){},6856:function(e,t,r){"use strict";var n=r("5654"),a=r.n(n);a.a},"8b3d":function(e,t,r){"use strict";r.r(t);var n=r("a34a"),a=r.n(n),i=r("dfd8");function s(e,t,r,n,a,i,s){try{var o=e[i](s),u=o.value}catch(c){return void r(c)}o.done?t(u):Promise.resolve(u).then(n,a)}function o(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function o(e){s(i,n,a,o,u,"next",e)}function u(e){s(i,n,a,o,u,"throw",e)}o(void 0)})}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}var f=function(){function e(){u(this,e)}return l(e,[{key:"addSong",value:function(){var e=o(a.a.mark(function e(t){var r;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["post"])("v1/song",t,{handleError:!0});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSong",value:function(){var e=o(a.a.mark(function e(t){var r;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["get"])("v1/song/".concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"editSong",value:function(){var e=o(a.a.mark(function e(t){var r;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["put"])("v1/song",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"delectSong",value:function(){var e=o(a.a.mark(function e(t){var r;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["_delete"])("v1/song/".concat(t));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSongs",value:function(){var e=o(a.a.mark(function e(t){var r;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["get"])("v1/song",t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()},{key:"getSongInList",value:function(){var e=o(a.a.mark(function e(t){var r;return a.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,Object(i["get"])("v1/song/list/"+t);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}},e)}));function t(t){return e.apply(this,arguments)}return t}()}]),e}();t["default"]=new f},c058:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container"},[r("div",{staticClass:"title"},[r("span",[e._v("修改歌曲")]),r("span",{staticClass:"back",on:{click:e.back}},[r("i",{staticClass:"iconfont icon-fanhui"}),e._v(" 返回 ")])]),r("el-divider"),r("div",{staticClass:"wrap"},[r("el-row",[r("el-col",{attrs:{lg:16,md:20,sm:24,xs:24}},[r("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"form",attrs:{model:e.form,"status-icon":"","label-width":"200px"},nativeOn:{submit:function(e){e.preventDefault()}}},[r("el-form-item",{attrs:{label:"歌曲",prop:"song"}},[r("el-input",{attrs:{size:"medium",placeholder:"请填写"},model:{value:e.form.song,callback:function(t){e.$set(e.form,"song",t)},expression:"form.song"}})],1),r("el-form-item",{attrs:{label:"歌手"}},[r("el-input",{attrs:{size:"medium",placeholder:"请填写"},model:{value:e.form.singer,callback:function(t){e.$set(e.form,"singer",t)},expression:"form.singer"}})],1),r("el-form-item",{attrs:{label:"歌手id"}},[r("el-input",{attrs:{size:"medium",placeholder:"请填写"},model:{value:e.form.singer_id,callback:function(t){e.$set(e.form,"singer_id",t)},expression:"form.singer_id"}})],1),r("el-form-item",{attrs:{label:"来源(0:网络;1:本地)",prop:"from"}},[r("el-switch",{attrs:{"active-text":"本地","inactive-text":"网络","active-value":"1","inactive-value":"0"},model:{value:e.form.from,callback:function(t){e.$set(e.form,"from",t)},expression:"form.from"}})],1),r("el-form-item",{attrs:{label:"播放地址(网络)",prop:"play_url"}},[r("el-input",{attrs:{size:"medium",type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"请填写"},model:{value:e.form.play_url,callback:function(t){e.$set(e.form,"play_url",t)},expression:"form.play_url"}})],1),r("el-form-item",{attrs:{label:"播放地址",prop:"play_url"}},[r("el-upload",{staticClass:"upload-demo",attrs:{action:e.uploadUrl,limit:1,"on-success":e.upload}},[r("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1),r("el-form-item",{attrs:{label:"mv播放地址",prop:"mv_url"}},[r("el-input",{attrs:{size:"medium",type:"textarea",autosize:{minRows:4,maxRows:8},placeholder:"没有可不填"},model:{value:e.form.mv_url,callback:function(t){e.$set(e.form,"mv_url",t)},expression:"form.mv_url"}})],1),r("el-form-item",{attrs:{label:"歌词id",prop:"lyric_id"}},[r("el-input",{attrs:{size:"medium",placeholder:"没有可不填"},model:{value:e.form.lyric_id,callback:function(t){e.$set(e.form,"lyric_id",t)},expression:"form.lyric_id"}})],1),r("el-form-item",{attrs:{label:"歌曲封面(网络)"}},[r("el-input",{attrs:{size:"medium",placeholder:"上传图片则不填"},model:{value:e.form.img,callback:function(t){e.$set(e.form,"img",t)},expression:"form.img"}})],1),r("el-form-item",{attrs:{label:"歌曲封面"}},[r("upload-imgs",{ref:"uploadEle",attrs:{value:e.initData,multiple:!0,"max-num":1,"auto-upload":!0}})],1),r("el-form-item",{staticClass:"submit"},[r("el-button",{directives:[{name:"auth",rawName:"v-auth",value:{auth:"创建歌单",type:"disabled"},expression:"{auth:'创建歌单', type: 'disabled'}"}],attrs:{type:"primary"},on:{click:function(t){return e.submitForm("form")}}},[e._v("保 存")]),r("el-button",{on:{click:function(t){return e.resetForm("form")}}},[e._v("重 置")])],1)],1)],1)],1)],1)],1)},a=[],i=r("a34a"),s=r.n(i),o=r("e0ba"),u=r("8b3d"),c=r("3de1");function l(e,t,r,n,a,i,s){try{var o=e[i](s),u=o.value}catch(c){return void r(c)}o.done?t(u):Promise.resolve(u).then(n,a)}function f(e){return function(){var t=this,r=arguments;return new Promise(function(n,a){var i=e.apply(t,r);function s(e){l(i,n,a,s,o,"next",e)}function o(e){l(i,n,a,s,o,"throw",e)}s(void 0)})}}var m={data:function(){return{form:{},initData:[],loading:!1,uploadUrl:"http://muscafe/index.php/cms/file"}},props:{editID:Number},components:{uploadImgs:o["default"]},methods:{submitForm:function(){var e=f(s.a.mark(function e(t){var r;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!0,e.next=3,this.getValue();case 3:if(console.log(this.form),this.form.img&&this.form.song&&this.form.singer&&this.form.play_url){e.next=7;break}return this.loading=!1,e.abrupt("return",this.$message.error("请完整填写"));case 7:return e.next=9,u["default"].editSong(this.form);case 9:r=e.sent,0===r.error_code?(this.$message.success("".concat(r.msg)),this.back()):this.$message.error(r.data.msg),this.loading=!1;case 12:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),resetForm:function(e){this.$refs[e].resetFields()},back:function(){this.$emit("editClose")},getCategorys:function(){var e=f(s.a.mark(function e(){var t;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,categoryModel.getCategorys();case 2:t=e.sent,this.category=t;case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),getSong:function(){var e=f(s.a.mark(function e(t){var r;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,u["default"].getSong(t);case 2:r=e.sent,console.log(r),this.form=r;case 5:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),getValue:function(){var e=f(s.a.mark(function e(){var t,r;return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(0!=this.form.from){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.$refs["uploadEle"].getValue();case 4:if(t=e.sent,r=t[0].src,r){e.next=8;break}return e.abrupt("return");case 8:this.form.img=r;case 9:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),upload:function(e,t,r){this.form.play_url=e[0].path},doClear:function(){this.$refs["uploadEle"].clear()},initUpload:function(e){this.initData=[{id:"",src:"",display:e,img_id:""}]}},created:function(){var e=f(s.a.mark(function e(){return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,this.getSong(this.editID);case 2:this.initUpload(this.form.img),1==this.form.from&&(this.form.play_url=Object(c["src"])(this.form.play_url),this.form.img=Object(c["src"])(this.form.img),console.log(this.form));case 4:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),mounted:function(){var e=f(s.a.mark(function e(){return s.a.wrap(function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));function t(){return e.apply(this,arguments)}return t}()},p=m,d=(r("6856"),r("2877")),h=Object(d["a"])(p,n,a,!1,null,"6aaacf25",null);t["default"]=h.exports}}]);